<!-- Template HTML (component.html) -->
<div class="content">
  <div class="form-container">
    <h2><i class="bi bi-people-fill me-2"></i>Liste des utilisateurs</h2>
    
    <div class="table-container">
      <div class="table-responsive">
        <table class="table">
          <thead>
            <tr>
              <th><i class="bi bi-person me-2"></i>Utilisateur</th>
              <th><i class="bi bi-envelope me-2"></i>Email</th>
              <th><i class="bi bi-telephone me-2"></i>Contact</th>
              <th><i class="bi bi-shield-check me-2"></i>RÃ´le</th>
              <th><i class="bi bi-building me-2"></i>DÃ©partement</th>
              <th><i class="bi bi-gear me-2"></i>Actions</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let utilisateur of utilisateurs; let i = index" 
                [style.animation-delay]="i * 150 + 'ms'">
              <td>
                <div class="user-info">
                  <div class="user-avatar">
                    {{ getInitials(utilisateur.prenom, utilisateur.name) }}
                  </div>
                  <div>
                    <div class="fw-bold">{{ utilisateur.name }}</div>
                    <div class="text-muted small">{{ utilisateur.prenom }}</div>
                  </div>
                </div>
              </td>
              <td>{{ utilisateur.username }}</td>
              <td>{{ utilisateur.contact }}</td>
              <td>
                <span class="role-badge" *ngFor="let role of utilisateur.roles">
                  {{ role.libelleRole }}
                </span>
              </td>
              <td>
                <span class="department-badge" *ngIf="utilisateur.departement">
                  {{ utilisateur.departement.nomDepartement }}
                </span>
              </td>
              <td>
                <div class="actions-container">
                  <button class="btn btn-primary btn-action"
                  (click)="modifierUtilisateur(utilisateur)"
                  [attr.aria-label]="'Modifier ' + utilisateur.name">
                    <i class="bi bi-pencil"></i>
          </button>
          
                  <button class="btn btn-danger btn-action" 
                          (click)="openDeleteDialog(utilisateur.id)"
                          [attr.aria-label]="'Supprimer ' + utilisateur.name">
                    <i class="bi bi-trash"></i>
                  </button>
                </div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>